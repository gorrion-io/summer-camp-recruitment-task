import type { NextPage } from "next";
import Head from "next/head";
import styles from "../styles/Home.module.css";
import UserCard from "../src/components/UserCard";
import { useEffect, useState } from "react";
import { User } from "../lib/users";
import { getAllUsers } from "../lib/users";

const Home: NextPage = () => {
	const [data, setData] = useState<User[]>([]);

	useEffect(() => {
		const getData = async () => {
			const users = await getAllUsers();
			setData(users);
		};
		getData();
	}, []);

	return (
		<div className={styles.container}>
			<Head>
				<title>Gorrion Summer Camp 2022 - recruitment task</title>
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.png" />
			</Head>

			<main className={styles.main}>
				<h1 className={styles.title}>
					<a href="https://gorrion.io">Gorrion</a> Summer Camp 2022
				</h1>

				<p className={styles.description}>
					Get started by editing <code className={styles.code}>pages/index.tsx</code>
				</p>
			</main>

			<section>
				{data.map(user => (
					<UserCard key={user.email}> {user} </UserCard>
				))}
			</section>
		</div>
	);
};

export default Home;
