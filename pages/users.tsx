// features
import { NextPage } from 'next';
import Head from 'next/head';
import { Key } from 'react';
// components
import { User } from '../lib/users';
import Layout from '../components/Layout/Layout';
import UserCard from '../components/UserCard/UserCard';
// styles
import classes from '../components/Layout/Layout.module.css';
// lib
import { getAllUsers } from '../lib/users';

// displaying users page
const Users: NextPage<{ allUsers: User[] }> = (props: { allUsers: User[] }) => {
  return (
    <Layout>
      <Head>
        <title>Gorrion Summer Camp 2022 - Frontend</title>
        <meta name='description' content='Generated by create next app' />
      </Head>
      <ul className={classes.userlist}>
        {props.allUsers.map((value: User, index: Key): any => {
          return (
            <li key={index as Key}>
              <UserCard user={value} />
            </li>
          );
        })}
      </ul>
    </Layout>
  );
};
// fetching users
export async function getStaticProps() {
  const allUsers = await getAllUsers();

  return {
    props: { allUsers }, // will be passed to the page component as props
  };
}

export default Users;
